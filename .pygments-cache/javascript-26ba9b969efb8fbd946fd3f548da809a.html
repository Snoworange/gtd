<div class="highlight"><pre><span class="kd">var</span> <span class="nx">user</span> <span class="o">=</span> <span class="s2">&quot;username&quot;</span><span class="p">,</span> <span class="nx">pw</span> <span class="o">=</span> <span class="s2">&quot;password&quot;</span><span class="p">,</span> <span class="nx">tag</span> <span class="o">=</span> <span class="s2">&quot;toread&quot;</span><span class="p">,</span> <span class="nx">shared</span> <span class="o">=</span> <span class="s2">&quot;yes&quot;</span><span class="p">,</span> <span class="nx">replace</span> <span class="o">=</span> <span class="s2">&quot;yes&quot;</span><span class="p">;</span>
<span class="kd">with</span><span class="p">(</span><span class="nb">document</span><span class="p">)</span> <span class="p">{</span>
  <span class="nx">i</span> <span class="o">=</span> <span class="nx">body</span><span class="p">.</span><span class="nx">appendChild</span><span class="p">(</span><span class="nx">createElement</span><span class="p">(</span><span class="s2">&quot;iframe&quot;</span><span class="p">));</span>
<span class="p">};</span>
<span class="kd">var</span> <span class="nx">notes</span> <span class="o">=</span> <span class="nx">getSelection</span><span class="p">().</span><span class="nx">toString</span><span class="p">().</span><span class="nx">substring</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span><span class="mi">253</span><span class="p">);</span>
<span class="k">if</span> <span class="p">(</span><span class="nx">notes</span><span class="p">)</span> <span class="nx">notes</span> <span class="o">=</span> <span class="s1">&#39;&quot;&#39;</span><span class="o">+</span><span class="nx">notes</span><span class="o">+</span><span class="s1">&#39;&quot;&#39;</span><span class="p">;</span>
<span class="nx">i</span><span class="p">.</span><span class="nx">style</span><span class="p">.</span><span class="nx">display</span> <span class="o">=</span> <span class="s1">&#39;none&#39;</span><span class="p">;</span>
<span class="nx">i</span><span class="p">.</span><span class="nx">src</span> <span class="o">=</span> <span class="s1">&#39;https://&#39;</span><span class="o">+</span><span class="nx">user</span><span class="o">+</span><span class="s1">&#39;:&#39;</span><span class="o">+</span><span class="nx">pw</span><span class="o">+</span><span class="s1">&#39;@api.del.icio.us/v1/posts/add?&amp;url=&#39;</span><span class="o">+</span><span class="nb">encodeURIComponent</span><span class="p">(</span><span class="nx">location</span><span class="p">.</span><span class="nx">href</span><span class="p">)</span><span class="o">+</span><span class="s1">&#39;&amp;description=&#39;</span><span class="o">+</span><span class="nb">encodeURIComponent</span><span class="p">(</span><span class="nb">document</span><span class="p">.</span><span class="nx">title</span><span class="p">)</span><span class="o">+</span><span class="s1">&#39;&amp;extended=&#39;</span><span class="o">+</span><span class="nb">encodeURIComponent</span><span class="p">(</span><span class="nx">notes</span><span class="p">)</span><span class="o">+</span><span class="s1">&#39;&amp;tags=&#39;</span><span class="o">+</span><span class="nx">tag</span><span class="o">+</span><span class="s1">&#39;&amp;shared=&#39;</span><span class="o">+</span><span class="nx">shared</span><span class="o">+</span><span class="s1">&#39;&amp;replace=&#39;</span><span class="o">+</span><span class="nx">replace</span><span class="p">;</span>

<span class="nx">alert</span><span class="p">(</span><span class="s1">&#39;OK, tagged as  “&#39;</span><span class="o">+</span><span class="nx">tag</span><span class="o">+</span><span class="s1">&#39;”.&#39;</span><span class="p">);</span>

<span class="nx">i</span><span class="p">.</span><span class="nx">parentNode</span><span class="p">.</span><span class="nx">removeChild</span><span class="p">(</span><span class="nx">i</span><span class="p">);</span>

<span class="k">void</span><span class="p">(</span><span class="mi">0</span><span class="p">);</span>
</pre>
</div>
