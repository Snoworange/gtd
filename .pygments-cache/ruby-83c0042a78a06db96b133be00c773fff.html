<div class="highlight"><pre><span class="k">class</span> <span class="nc">ActiveRecord</span><span class="o">::</span><span class="no">Errors</span>
  <span class="k">def</span> <span class="nf">full_messages</span>
    <span class="n">full_messages</span> <span class="o">=</span> <span class="o">[]</span>

    <span class="vi">@errors</span><span class="o">.</span><span class="n">each_key</span> <span class="k">do</span> <span class="o">|</span><span class="kp">attr</span><span class="o">|</span>
      <span class="vi">@errors</span><span class="o">[</span><span class="kp">attr</span><span class="o">].</span><span class="n">each</span> <span class="k">do</span> <span class="o">|</span><span class="n">msg</span><span class="o">|</span>
        <span class="k">next</span> <span class="k">if</span> <span class="n">msg</span><span class="o">.</span><span class="n">nil?</span>

        <span class="k">if</span> <span class="kp">attr</span> <span class="o">==</span> <span class="s2">&quot;base&quot;</span> <span class="o">||</span> <span class="n">msg</span> <span class="o">=~</span> <span class="sr">/^[[:upper:]]/</span>
          <span class="n">full_messages</span> <span class="o">&lt;&lt;</span> <span class="n">msg</span>
        <span class="k">else</span>
          <span class="n">full_messages</span> <span class="o">&lt;&lt;</span> <span class="vi">@base</span><span class="o">.</span><span class="n">class</span><span class="o">.</span><span class="n">human_attribute_name</span><span class="p">(</span><span class="kp">attr</span><span class="p">)</span> <span class="o">+</span> <span class="s2">&quot; &quot;</span> <span class="o">+</span> <span class="n">msg</span>
        <span class="k">end</span>
      <span class="k">end</span>
    <span class="k">end</span>
    <span class="n">full_messages</span>
  <span class="k">end</span>
<span class="k">end</span>
</pre>
</div>
