<div class="highlight"><pre><span class="cm">/* http://www.lalit.org/lab/fontdetect.php */</span>
<span class="kd">var</span> <span class="nx">FontDetector</span> <span class="o">=</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
  <span class="kd">var</span> <span class="nx">h</span> <span class="o">=</span> <span class="nb">document</span><span class="p">.</span><span class="nx">getElementsByTagName</span><span class="p">(</span><span class="s2">&quot;BODY&quot;</span><span class="p">)[</span><span class="mi">0</span><span class="p">];</span>
  <span class="kd">var</span> <span class="nx">d</span> <span class="o">=</span> <span class="nb">document</span><span class="p">.</span><span class="nx">createElement</span><span class="p">(</span><span class="s2">&quot;DIV&quot;</span><span class="p">);</span>
  <span class="kd">var</span> <span class="nx">s</span> <span class="o">=</span> <span class="nb">document</span><span class="p">.</span><span class="nx">createElement</span><span class="p">(</span><span class="s2">&quot;SPAN&quot;</span><span class="p">);</span>

  <span class="nx">d</span><span class="p">.</span><span class="nx">appendChild</span><span class="p">(</span><span class="nx">s</span><span class="p">);</span>
  <span class="nx">d</span><span class="p">.</span><span class="nx">style</span><span class="p">.</span><span class="nx">fontFamily</span> <span class="o">=</span> <span class="s2">&quot;sans-serif&quot;</span><span class="p">;</span>    <span class="c1">//font for the parent element DIV.</span>
  <span class="nx">s</span><span class="p">.</span><span class="nx">style</span><span class="p">.</span><span class="nx">fontFamily</span> <span class="o">=</span> <span class="s2">&quot;sans-serif&quot;</span><span class="p">;</span>    <span class="c1">//arial font used as a comparator.</span>
  <span class="nx">s</span><span class="p">.</span><span class="nx">style</span><span class="p">.</span><span class="nx">fontSize</span>   <span class="o">=</span> <span class="s2">&quot;72px&quot;</span><span class="p">;</span>      <span class="c1">//we test using 72px font size, we may use any size. I guess larger the better.</span>
  <span class="nx">s</span><span class="p">.</span><span class="nx">innerHTML</span>        <span class="o">=</span> <span class="s2">&quot;mmmmmmmmmml&quot;</span><span class="p">;</span>    <span class="c1">//we use m or w because these two characters take up the maximum width. And we use a L so that the same matching fonts can get separated</span>
  <span class="nx">h</span><span class="p">.</span><span class="nx">appendChild</span><span class="p">(</span><span class="nx">d</span><span class="p">);</span>
  <span class="kd">var</span> <span class="nx">defaultWidth</span>   <span class="o">=</span> <span class="nx">s</span><span class="p">.</span><span class="nx">offsetWidth</span><span class="p">;</span>    <span class="c1">//now we have the defaultWidth</span>
  <span class="kd">var</span> <span class="nx">defaultHeight</span>  <span class="o">=</span> <span class="nx">s</span><span class="p">.</span><span class="nx">offsetHeight</span><span class="p">;</span>  <span class="c1">//and the defaultHeight, we compare other fonts with these.</span>
  <span class="nx">h</span><span class="p">.</span><span class="nx">removeChild</span><span class="p">(</span><span class="nx">d</span><span class="p">);</span>

  <span class="cm">/* test</span>
<span class="cm">   * params:</span>
<span class="cm">   * font - name of the font you wish to detect</span>
<span class="cm">   * return:</span>
<span class="cm">   * f[0] - Input font name.</span>
<span class="cm">   * f[1] - Computed width.</span>
<span class="cm">   * f[2] - Computed height.</span>
<span class="cm">   * f[3] - Detected? (true/false).</span>
<span class="cm">   */</span>
  <span class="kd">function</span> <span class="nx">test</span><span class="p">(</span><span class="nx">font</span><span class="p">)</span> <span class="p">{</span>
    <span class="nx">h</span><span class="p">.</span><span class="nx">appendChild</span><span class="p">(</span><span class="nx">d</span><span class="p">);</span>
    <span class="kd">var</span> <span class="nx">f</span> <span class="o">=</span> <span class="p">[];</span>
    <span class="nx">f</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">=</span> <span class="nx">s</span><span class="p">.</span><span class="nx">style</span><span class="p">.</span><span class="nx">fontFamily</span> <span class="o">=</span> <span class="nx">font</span><span class="p">;</span>  <span class="c1">// Name of the font</span>
    <span class="nx">f</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="o">=</span> <span class="nx">s</span><span class="p">.</span><span class="nx">offsetWidth</span><span class="p">;</span>        <span class="c1">// Width</span>
    <span class="nx">f</span><span class="p">[</span><span class="mi">2</span><span class="p">]</span> <span class="o">=</span> <span class="nx">s</span><span class="p">.</span><span class="nx">offsetHeight</span><span class="p">;</span>        <span class="c1">// Height</span>
    <span class="nx">h</span><span class="p">.</span><span class="nx">removeChild</span><span class="p">(</span><span class="nx">d</span><span class="p">);</span>

    <span class="nx">font</span> <span class="o">=</span> <span class="nx">font</span><span class="p">.</span><span class="nx">toLowerCase</span><span class="p">();</span>
    <span class="k">if</span> <span class="p">(</span><span class="nx">font</span> <span class="o">==</span> <span class="s2">&quot;arial&quot;</span> <span class="o">||</span> <span class="nx">font</span> <span class="o">==</span> <span class="s2">&quot;sans-serif&quot;</span><span class="p">)</span> <span class="p">{</span>
      <span class="nx">f</span><span class="p">[</span><span class="mi">3</span><span class="p">]</span> <span class="o">=</span> <span class="kc">true</span><span class="p">;</span>  <span class="c1">// to set arial and sans-serif true</span>
    <span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
      <span class="nx">f</span><span class="p">[</span><span class="mi">3</span><span class="p">]</span> <span class="o">=</span> <span class="p">(</span><span class="nx">f</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="o">!=</span> <span class="nx">defaultWidth</span> <span class="o">||</span> <span class="nx">f</span><span class="p">[</span><span class="mi">2</span><span class="p">]</span> <span class="o">!=</span> <span class="nx">defaultHeight</span><span class="p">);</span>  <span class="c1">// Detected?</span>
    <span class="p">}</span>
    <span class="k">return</span> <span class="nx">f</span><span class="p">[</span><span class="mi">3</span><span class="p">];</span>
  <span class="p">}</span>
  <span class="k">this</span><span class="p">.</span><span class="nx">test</span> <span class="o">=</span> <span class="nx">test</span><span class="p">;</span>
<span class="p">}</span>
</pre>
</div>
